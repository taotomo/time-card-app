# Time Card App - AI Coding Instructions

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆTime Card Appï¼‰- Laravel 10.x + Dockerç’°å¢ƒã§æ§‹ç¯‰ã•ã‚Œã‚‹å‡ºé€€å‹¤ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

**ğŸš§ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³**: ç¾åœ¨åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ®µéšã€‚Laravelã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€Dockerè¨­å®šã€åŸºæœ¬çš„ãªMVCãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã®ä½œæˆã‹ã‚‰é–‹å§‹ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æœ€åˆã«å®Ÿè¡Œã™ã‚‹ã¹ãã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# Laravel ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ï¼ˆã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ãªã„å ´åˆï¼‰
composer create-project laravel/laravel . "10.*"

# Fortify ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
composer require laravel/fortify

# åŸºæœ¬çš„ãªDockerç’°å¢ƒã®ä½œæˆï¼ˆdocker-compose.yml, Dockerfileç­‰ï¼‰
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ
# åŸºæœ¬çš„ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ãƒ«ãƒ¼ãƒˆè¨­å®š
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ & æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ã‚³ã‚¢æŠ€è¡“
- **Backend**: Laravel 10.x with Laravel Fortify (èªè¨¼)
- **Database**: MySQL 8.0  
- **Frontend**: Blade templates with Laravel Mix
- **Infrastructure**: Docker + Docker Compose + Nginx
- **Language**: PHP 8.1+

### Dockerç’°å¢ƒæ§‹æˆ
```bash
# æœ€åˆã«ä½œæˆã™ã‚‹ã¹ããƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼š
# docker-compose.yml (app, mysql, nginx ã‚µãƒ¼ãƒ“ã‚¹)
# docker/app/Dockerfile (PHP 8.1 + Laravel)
# docker/nginx/default.conf (Nginxã®è¨­å®š)

# æ¨™æº–é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆDockerãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå¾Œï¼‰
docker-compose up -d --build          # ç’°å¢ƒæ§‹ç¯‰
docker-compose exec app composer install
docker-compose exec app php artisan key:generate
docker-compose exec app php artisan migrate
```

## å‹¤æ€ ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å®Ÿè£…å„ªå…ˆåº¦

### Phase 1: åŸºæœ¬èªè¨¼ãƒ»å‡ºé€€å‹¤æ©Ÿèƒ½
1. Laravel Fortify ã«ã‚ˆã‚‹èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
2. User ãƒ¢ãƒ‡ãƒ«ã¨åŸºæœ¬çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
3. TimeCard ãƒ¢ãƒ‡ãƒ«ï¼ˆå‡ºé€€å‹¤è¨˜éŒ²ï¼‰
4. åŸºæœ¬çš„ãªå‡ºé€€å‹¤æ‰“åˆ»æ©Ÿèƒ½

### Phase 2: ç®¡ç†æ©Ÿèƒ½
1. WorkSession ãƒ¢ãƒ‡ãƒ«ï¼ˆå°±æ¥­æ™‚é–“è¨ˆç®—ï¼‰
2. Department ãƒ¢ãƒ‡ãƒ«ï¼ˆéƒ¨ç½²ç®¡ç†ï¼‰
3. ç®¡ç†è€…ã«ã‚ˆã‚‹å‹¤æ€ ãƒ‡ãƒ¼ã‚¿ç®¡ç†
4. æœˆæ¬¡ãƒ»æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

## é–‹ç™ºè¦ç´„ & ãƒ‘ã‚¿ãƒ¼ãƒ³

### Laravelå›ºæœ‰ã®å®Ÿè£…æ–¹é‡
- **èªè¨¼**: Laravel Fortifyã‚’ä½¿ç”¨ - ã‚«ã‚¹ã‚¿ãƒ èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã¯é¿ã‘ã‚‹
- **DBæ“ä½œ**: Eloquent ORMã‚’å„ªå…ˆã€ç”ŸSQLã¯æœ€å°é™
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: Form Request classesã‚’ä½¿ç”¨
- **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: RESTfulãƒªã‚½ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆã‚’åŸºæœ¬ã¨ã™ã‚‹

### å‹¤æ€ ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³ã®é‡è¦æ¦‚å¿µ
```php
// æƒ³å®šã•ã‚Œã‚‹ä¸»è¦ãƒ¢ãƒ‡ãƒ«
- User (å¾“æ¥­å“¡)
- TimeCard (å‹¤æ€ è¨˜éŒ²) 
- WorkSession (å°±æ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³)
- Department (éƒ¨ç½²)
```

### Japanese Localization
- **è¨€èª**: æ—¥æœ¬èªUIã‚’å‰æã¨ã—ãŸé–‹ç™º
- **ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³**: Asia/Tokyoå›ºå®š
- **æ—¥ä»˜å½¢å¼**: Y-m-d H:i:s (24æ™‚é–“åˆ¶)
- **é€±å§‹ã¾ã‚Š**: æœˆæ›œæ—¥ãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### å‹¤æ€ ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæŒ‡é‡
```sql
-- å‡ºé€€å‹¤è¨˜éŒ²ã¯å˜ä¸€ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†
-- clock_in/clock_out ã‚«ãƒ©ãƒ ã¾ãŸã¯æ™‚ç³»åˆ—ãƒ¬ã‚³ãƒ¼ãƒ‰æ–¹å¼
-- ä¿®æ­£å±¥æ­´ã¯ separate audit table ã§ç®¡ç†
-- ç®¡ç†è€…æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’è€ƒæ…®ã—ãŸ status ã‚«ãƒ©ãƒ 
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´„
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯å¿…é ˆ (`created_at`, `updated_at`)
- Soft deletes for å‹¤æ€ ãƒ‡ãƒ¼ã‚¿ (`deleted_at`)
- Foreign key constraintsã‚’é©åˆ‡ã«è¨­å®š

## Dockeré–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### é‡è¦ãªã‚³ãƒãƒ³ãƒ‰
```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã§ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
docker-compose exec app php artisan [command]
docker-compose exec app composer [command]

# ãƒ­ã‚°ç¢ºèª
docker-compose logs app
docker-compose logs mysql

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
docker-compose exec mysql mysql -u root -p laravel_db
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å„ªå…ˆåº¦
1. `.env` (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨)
2. `docker-compose.yml` (Dockerç’°å¢ƒè¨­å®š)
3. `config/` (Laravelè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«)

## UI/UX è€ƒæ…®äº‹é …

### å‹¤æ€ ç®¡ç†UIç‰¹æœ‰ã®è¦ä»¶
- **ãƒ¯ãƒ³ã‚¿ãƒƒãƒæ‰“åˆ»**: å¤§ããªãƒœã‚¿ãƒ³ã§ã®å‡ºé€€å‹¤æ“ä½œ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º**: ç¾åœ¨ã®å‹¤å‹™çŠ¶æ…‹ã‚’æ˜ç¢ºã«è¡¨ç¤º  
- **æœˆæ¬¡é›†è¨ˆ**: åŠ´åƒæ™‚é–“ã®æœˆæ¬¡ã‚µãƒãƒªãƒ¼è¡¨ç¤º
- **ç®¡ç†è€…ãƒ“ãƒ¥ãƒ¼**: æ‰¿èªå¾…ã¡ä¸€è¦§ã€éƒ¨ç½²åˆ¥é›†è¨ˆ

### Blade Templateæ§‹æˆ
```php
// æ¨å¥¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
layouts/app.blade.php     // å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
components/timecard.blade.php  // æ‰“åˆ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ  
dashboard/index.blade.php  // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
admin/reports.blade.php    // ç®¡ç†è€…ãƒ¬ãƒãƒ¼ãƒˆ
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ & èªè¨¼

### Laravel Fortifyè¨­å®š
- **Features**: registration, login, logout, password reset
- **Guards**: web guardä½¿ç”¨ã€APIèªè¨¼ã¯å¿…è¦ã«å¿œã˜ã¦Sanctumè¿½åŠ 
- **Middleware**: `auth`, `verified` ã‚’é©åˆ‡ã«é©ç”¨

### å‹¤æ€ ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **Authorization policies**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®å‹¤æ€ ãƒ‡ãƒ¼ã‚¿ã®ã¿æ“ä½œå¯èƒ½
- **ç®¡ç†è€…æ¨©é™**: Role-based access controlå®Ÿè£…
- **ãƒ‡ãƒ¼ã‚¿æ”¹ã–ã‚“é˜²æ­¢**: å‹¤æ€ ä¿®æ­£æ™‚ã®ãƒ­ã‚°è¨˜éŒ²

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### é‡è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- å‡ºé€€å‹¤æ©Ÿèƒ½ã®Feature tests
- å‹¤æ€ è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®Unit tests  
- èªè¨¼ãƒ•ãƒ­ãƒ¼ã®Integration tests
- ç®¡ç†è€…æ¨©é™ã®Authorization tests

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec app php artisan test
docker-compose exec app php artisan test --filter TimeCardTest
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®ç‚¹

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæœ€é©åŒ–
- å‹¤æ€ ãƒ‡ãƒ¼ã‚¿ã®æœˆæ¬¡é›†è¨ˆã¯åŠ¹ç‡çš„ãªã‚¯ã‚¨ãƒªè¨­è¨ˆãŒå¿…è¦
- Eager loading for related data (User, Department)
- Database indexing on frequently queried columns (user_id, created_at)

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥  
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™æƒ…å ±ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥

---

**Note**: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯åŠ´åƒåŸºæº–æ³•ã«æº–æ‹ ã—ãŸå‹¤æ€ ç®¡ç†ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãŸã‚ã€æ³•çš„è¦ä»¶ï¼ˆåŠ´åƒæ™‚é–“ä¸Šé™ã€ä¼‘æ†©æ™‚é–“ç­‰ï¼‰ã‚’è€ƒæ…®ã—ãŸå®Ÿè£…ãŒé‡è¦ã§ã™ã€‚